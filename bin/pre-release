#!/usr/bin/env bash

set -eo pipefail

################################################################################
# Validate Inputs
################################################################################

function usage {
    echo "usage: $0 [namespace] [tag]"
    echo "  namespace    namespace to promote the image (eg. production)"
    echo "  tag          tag of the image version (eg. latest)"
    exit 1
}

[ -z "$1" ] && { usage; }

################################################################################
# Set Inputs
################################################################################

NAMESPACE=$1
TAG=$2

################################################################################
# Constants
################################################################################

DIR="$(dirname "${BASH_SOURCE[0]}")"

################################################################################
# Execute Pre Release Scripts
################################################################################

${DIR}/pre-release-scripts/db-migrate $NAMESPACE $TAG
